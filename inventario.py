# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
# â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
# â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
# â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘     â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•
# â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• 
#  â•šâ•â•â•â•â•â•â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â• â•šâ•â•â•â•â•â•  â•šâ•â•â•â•  
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ¢ SISTEMA DE CONTROL DE INVENTARIO EMPRESARIAL
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ‘¤ Desarrollador: Johansen Uriel Samos Godoy
# ğŸ“… Fecha: 06-03-2025
# ğŸ·ï¸  VersiÃ³n: 2.0 Professional Edition
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import os
import sys
from datetime import datetime

class Colors:
    """Clase para manejar colores en la consola"""
    RESET = '\033[0m'
    BOLD = '\033[1m'
    UNDERLINE = '\033[4m'
    
    # Colores de texto
    BLACK = '\033[30m'
    RED = '\033[31m'
    GREEN = '\033[32m'
    YELLOW = '\033[33m'
    BLUE = '\033[34m'
    MAGENTA = '\033[35m'
    CYAN = '\033[36m'
    WHITE = '\033[37m'
    
    # Colores de fondo
    BG_BLACK = '\033[40m'
    BG_RED = '\033[41m'
    BG_GREEN = '\033[42m'
    BG_YELLOW = '\033[43m'
    BG_BLUE = '\033[44m'
    BG_MAGENTA = '\033[45m'
    BG_CYAN = '\033[46m'
    BG_WHITE = '\033[47m'

def limpiar_pantalla():
    """Limpia la pantalla de la consola"""
    os.system('cls' if os.name == 'nt' else 'clear')

def mostrar_header():
    """Muestra el encabezado principal del sistema"""
    print(f"{Colors.CYAN}{Colors.BOLD}")
    print("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    print("â•‘                    ğŸ¢ MSN.SA.CV - INVENTARIO PRO                 â•‘")
    print("â•‘                                                                  â•‘")
    print("â•‘              ğŸ“¦ SISTEMA DE CONTROL DE INVENTARIO                 â•‘")
    print("â•‘                        Version 2.0                              â•‘")
    print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    print(f"{Colors.RESET}")
    
def mostrar_separador():
    """Muestra un separador visual"""
    print(f"{Colors.BLUE}{'â•' * 70}{Colors.RESET}")

def mostrar_subseparador():
    """Muestra un subseparador visual"""
    print(f"{Colors.CYAN}{'â”€' * 70}{Colors.RESET}")

def mostrar_timestamp():
    """Muestra la fecha y hora actual"""
    ahora = datetime.now().strftime("%d/%m/%Y - %H:%M:%S")
    print(f"{Colors.MAGENTA}ğŸ“… Fecha y hora: {ahora}{Colors.RESET}")

def input_styled(mensaje, color=Colors.YELLOW):
    """Input con estilo personalizado"""
    return input(f"{color}â¤ {mensaje}: {Colors.RESET}")

def print_success(mensaje):
    """Mensaje de Ã©xito"""
    print(f"{Colors.GREEN}âœ… {mensaje}{Colors.RESET}")

def print_error(mensaje):
    """Mensaje de error"""
    print(f"{Colors.RED}âŒ {mensaje}{Colors.RESET}")

def print_info(mensaje):
    """Mensaje informativo"""
    print(f"{Colors.BLUE}â„¹ï¸  {mensaje}{Colors.RESET}")

def print_warning(mensaje):
    """Mensaje de advertencia"""
    print(f"{Colors.YELLOW}âš ï¸  {mensaje}{Colors.RESET}")

class Articulo:
    def __init__(self, nombre, cantidad, precio):
        self.nombre = nombre
        self.cantidad = cantidad
        self.precio = precio
    
    def __str__(self):
        return f"ğŸ“¦ {self.nombre:<20} â”‚ Cantidad: {self.cantidad:<6} â”‚ Precio: ${self.precio:<8.2f}"

class Inventario:
    def __init__(self):
        self.articulos = []
    
    def agregar_articulo(self, articulo):
        self.articulos.append(articulo)
        print_success(f"ArtÃ­culo '{articulo.nombre}' agregado exitosamente al inventario")
    
    def mostrar_inventario(self):
        if self.articulos:
            print(f"\n{Colors.CYAN}{Colors.BOLD}ğŸ“‹ INVENTARIO ACTUAL{Colors.RESET}")
            mostrar_separador()
            print(f"{Colors.BLUE}{Colors.BOLD}{'PRODUCTO':<20} â”‚ {'CANTIDAD':<10} â”‚ {'PRECIO':<10} â”‚ {'VALOR TOTAL':<12}{Colors.RESET}")
            mostrar_subseparador()
            
            total_general = 0
            for i, articulo in enumerate(self.articulos, 1):
                valor_total = articulo.precio * articulo.cantidad
                total_general += valor_total
                
                # Alternar colores para mejor legibilidad
                color = Colors.WHITE if i % 2 == 0 else Colors.CYAN
                print(f"{color}{articulo.nombre:<20} â”‚ {articulo.cantidad:<10} â”‚ ${articulo.precio:<9.2f} â”‚ ${valor_total:<11.2f}{Colors.RESET}")
            
            mostrar_subseparador()
            print(f"{Colors.GREEN}{Colors.BOLD}ğŸ’° VALOR TOTAL DEL INVENTARIO: ${total_general:.2f}{Colors.RESET}")
            mostrar_separador()
        else:
            print_warning("El inventario estÃ¡ vacÃ­o")
    
    def ventas(self, nombre, cantidad):
        for articulo in self.articulos:
            if articulo.nombre.casefold() == nombre.casefold():
                if articulo.cantidad >= cantidad:
                    articulo.cantidad -= cantidad
                    total_venta = articulo.precio * cantidad
                    
                    print(f"\n{Colors.GREEN}{Colors.BOLD}ğŸ‰ VENTA REALIZADA EXITOSAMENTE{Colors.RESET}")
                    mostrar_subseparador()
                    print(f"{Colors.CYAN}ğŸ“¦ Producto: {articulo.nombre}{Colors.RESET}")
                    print(f"{Colors.CYAN}ğŸ”¢ Cantidad vendida: {cantidad} unidades{Colors.RESET}")
                    print(f"{Colors.CYAN}ğŸ’µ Precio unitario: ${articulo.precio:.2f}{Colors.RESET}")
                    print(f"{Colors.GREEN}{Colors.BOLD}ğŸ’° TOTAL DE LA VENTA: ${total_venta:.2f}{Colors.RESET}")
                    print(f"{Colors.BLUE}ğŸ“Š Cantidad restante: {articulo.cantidad} unidades{Colors.RESET}")
                    mostrar_subseparador()
                else:
                    print_error(f"Stock insuficiente. Solo hay {articulo.cantidad} unidades disponibles")
                return
        
        print_error(f"Producto '{nombre}' no encontrado en el inventario")
    
    def valor_total(self):
        if self.articulos:
            total = sum(a.precio * a.cantidad for a in self.articulos)
            
            print(f"\n{Colors.MAGENTA}{Colors.BOLD}ğŸ’ RESUMEN FINANCIERO{Colors.RESET}")
            mostrar_separador()
            print(f"{Colors.CYAN}ğŸ“Š Total de productos: {len(self.articulos)}{Colors.RESET}")
            print(f"{Colors.CYAN}ğŸ“¦ Total de unidades: {sum(a.cantidad for a in self.articulos)}{Colors.RESET}")
            print(f"{Colors.GREEN}{Colors.BOLD}ğŸ’° VALOR TOTAL DEL INVENTARIO: ${total:.2f}{Colors.RESET}")
            mostrar_separador()
        else:
            print_warning("No hay productos en el inventario para calcular")

def mostrar_menu():
    """Muestra el menÃº principal del sistema"""
    print(f"\n{Colors.YELLOW}{Colors.BOLD}ğŸ›ï¸  MENÃš PRINCIPAL{Colors.RESET}")
    mostrar_separador()
    
    opciones = [
        ("1", "ğŸ“‹ Ver inventario completo", Colors.CYAN),
        ("2", "â• Agregar nuevo artÃ­culo", Colors.GREEN),
        ("3", "ğŸ›’ Realizar venta", Colors.YELLOW),
        ("4", "ğŸ’° Valor total del inventario", Colors.MAGENTA),
        ("5", "âŒ Salir del sistema", Colors.RED)
    ]
    
    for numero, descripcion, color in opciones:
        print(f"{color}[{numero}] {descripcion}{Colors.RESET}")
    
    mostrar_separador()

def mostrar_bienvenida():
    """Muestra mensaje de bienvenida"""
    limpiar_pantalla()
    mostrar_header()
    mostrar_timestamp()
    print(f"\n{Colors.GREEN}ğŸ‰ Â¡Bienvenido al Sistema de Control de Inventario!{Colors.RESET}")
    print(f"{Colors.BLUE}Administre su inventario de manera profesional y eficiente{Colors.RESET}")

def inicializar_productos_demo(inventario):
    """Inicializa productos de demostraciÃ³n"""
    productos = [
        ("Llave Trupper", 10, 98.00),
        ("TeflÃ³n Industrial", 25, 15.00),
        ("Broca para Metal", 35, 25.00),
        ("Cinta Aislante", 17, 15.00),
        ("Hilo de AlgodÃ³n", 50, 4.00),
        ("Foco LED", 110, 70.00)
    ]
    
    print(f"\n{Colors.BLUE}ğŸ”„ Inicializando inventario con productos de demostraciÃ³n...{Colors.RESET}")
    
    for nombre, cantidad, precio in productos:
        inventario.agregar_articulo(Articulo(nombre, cantidad, precio))
    
    print_success("Productos de demostraciÃ³n cargados correctamente")

def pausar():
    """Pausa la ejecuciÃ³n hasta que el usuario presione Enter"""
    input(f"\n{Colors.YELLOW}ğŸ“Œ Presione Enter para continuar...{Colors.RESET}")

def confirmar_salida():
    """Confirma si el usuario desea salir"""
    while True:
        respuesta = input_styled("Â¿EstÃ¡ seguro que desea salir del sistema? (s/n)", Colors.RED).lower()
        if respuesta in ['s', 'si', 'sÃ­', 'yes', 'y']:
            return True
        elif respuesta in ['n', 'no']:
            return False
        else:
            print_error("Respuesta no vÃ¡lida. Ingrese 's' para sÃ­ o 'n' para no")

def main():
    """FunciÃ³n principal del programa"""
    inventario = Inventario()
    
    # Mostrar bienvenida
    mostrar_bienvenida()
    
    # Inicializar productos de demostraciÃ³n
    inicializar_productos_demo(inventario)
    
    pausar()
    
    while True:
        try:
            limpiar_pantalla()
            mostrar_header()
            mostrar_menu()
            
            opcion = input_styled("Seleccione una opciÃ³n", Colors.WHITE)
            
            if opcion == "1":
                limpiar_pantalla()
                mostrar_header()
                inventario.mostrar_inventario()
                pausar()
                
            elif opcion == "2":
                limpiar_pantalla()
                mostrar_header()
                print(f"\n{Colors.GREEN}{Colors.BOLD}â• AGREGAR NUEVO ARTÃCULO{Colors.RESET}")
                mostrar_separador()
                
                try:
                    nombre = input_styled("Nombre del producto")
                    if not nombre.strip():
                        print_error("El nombre del producto no puede estar vacÃ­o")
                        pausar()
                        continue
                        
                    cantidad = int(input_styled("Cantidad"))
                    if cantidad < 0:
                        print_error("La cantidad no puede ser negativa")
                        pausar()
                        continue
                        
                    precio = float(input_styled("Precio unitario"))
                    if precio < 0:
                        print_error("El precio no puede ser negativo")
                        pausar()
                        continue
                    
                    inventario.agregar_articulo(Articulo(nombre, cantidad, precio))
                    
                except ValueError:
                    print_error("Error: Ingrese valores numÃ©ricos vÃ¡lidos para cantidad y precio")
                
                pausar()
                
            elif opcion == "3":
                limpiar_pantalla()
                mostrar_header()
                print(f"\n{Colors.YELLOW}{Colors.BOLD}ğŸ›’ REALIZAR VENTA{Colors.RESET}")
                mostrar_separador()
                
                if not inventario.articulos:
                    print_warning("No hay productos en el inventario para vender")
                    pausar()
                    continue
                
                try:
                    nombre = input_styled("Nombre del producto a vender")
                    cantidad = int(input_styled("Cantidad a vender"))
                    
                    if cantidad <= 0:
                        print_error("La cantidad debe ser mayor a 0")
                        pausar()
                        continue
                    
                    inventario.ventas(nombre, cantidad)
                    
                except ValueError:
                    print_error("Error: Ingrese un valor numÃ©rico vÃ¡lido para la cantidad")
                
                pausar()
                
            elif opcion == "4":
                limpiar_pantalla()
                mostrar_header()
                inventario.valor_total()
                pausar()
                
            elif opcion == "5":
                if confirmar_salida():
                    limpiar_pantalla()
                    print(f"{Colors.CYAN}{Colors.BOLD}")
                    print("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
                    print("â•‘                                                                  â•‘")
                    print("â•‘                    ğŸ‘‹ HASTA PRONTO                               â•‘")
                    print("â•‘                                                                  â•‘")
                    print("â•‘          Gracias por usar MSN.SA.CV - Inventario Pro            â•‘")
                    print("â•‘                                                                  â•‘")
                    print("â•‘                 Desarrollado por: Johansen Uriel                â•‘")
                    print("â•‘                                                                  â•‘")
                    print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
                    print(f"{Colors.RESET}")
                    
                    mostrar_timestamp()
                    print(f"\n{Colors.GREEN}âœ¨ Sistema cerrado correctamente{Colors.RESET}")
                    sys.exit(0)
            else:
                print_error("OpciÃ³n no vÃ¡lida. Seleccione una opciÃ³n del 1 al 5")
                pausar()
                
        except KeyboardInterrupt:
            print(f"\n\n{Colors.YELLOW}InterrupciÃ³n detectada. Cerrando sistema...{Colors.RESET}")
            sys.exit(0)
        except Exception as e:
            print_error(f"Error inesperado: {str(e)}")
            pausar()

if __name__ == "__main__":
    main()